var browsers = [{
	name: "Internet Explorer 8",
	url: "http://windows.microsoft.com/zh-TW/internet-explorer/download-ie",
	image: "<%= image_path('browser_ie.gif') %>"
}, {
	name: "Firefox 3+",
	url: "http://www.mozilla.org/zh-TW/firefox/new/",
	image: "<%= image_path('browser_firefox.gif') %>"
}, {
	name: "Opera 9.5+",
	url: "http://www.opera.com/download/",
	image: "<%= image_path('browser_opera.gif') %>"
}, {
	name: "Chrome 2.0+",
	url: "https://www.google.com/intl/zh-TW/chrome/browser/",
	image: "<%= image_path('browser_chrome.gif') %>"
}];

function showWarning() {
	var body = document.getElementsByTagName('body')[0];
	var warning = document.createElement("div");

	var full_width = document.documentElement.clientWidth;
	var full_height = document.documentElement.clientHeight;

	var width = 660;
	var height = 325;

    var pre_template = '<div style="border:1px solid #ccc;width:' + width.toString() + 'px;filter: alpha(opacity=95);background:#fff;padding:0 0 5px 0;margin:0;"><div style="text-align: right; padding:5px 10px;margin:0;font-size:12px;line-height:12px;background-color:#ffffcc;border-bottom: 1px solid #ccc" onclick="hideWarning();"><a style="color: #0E6AD3;text-decoration: none;margin:5px;padding:0;" href="#">Close [x]</a></div><div style="font-family:Helvetica,Arial,sans-serif;font-size:16px;padding:5px 10px;color:#333"><h1 style="font-size:22px">本站不支援IE6(PCMan/KKMAN)，請改採用下列其它更快更好更安全的瀏覽器。<br/>Did you know that your Internet Explorer is out of date?</h1><p>To get the best possible experience using our website we recommend that you upgrade to a newer version or other web browser. A list of the most popular web browsers can be found below.</p><p>Just click on the icons to get to the download page.</p></div><div style="font-family:Arial,Verdana,sans-serif;color:#4f4f4f;font-size:12px;padding-left: 5px;">';
	var middle = "";

	var i;
	for (i = 0; i < browsers.length; i += 1) {
		middle += "<div style='padding:0;margin:5px;float:left;display:inline;background: url(<%= image_path('background_browser.gif') %>) no-repeat scroll left top; width: 120px; height: 122px;'><a href='" + browsers[i].url + "' style='padding:0;margin:4px 10px;display:block;width:100px;height:96px;background:transparent url(" + browsers[i].image + ");'></a><div style='text-align:center;font-size:12px;line-height:12px;margin:0;padding:0'>" + browsers[i].name + "</div></div>";
	}

	var post_template = "<div style = 'clear:both'></div></div></div>";

	warning.innerHTML = pre_template + middle + post_template;

	warning.style.position = 'absolute';
	warning.style.left = (full_width / 2 - width / 2).toString() + "px";
	warning.style.top = (full_height / 2 - height / 2).toString() + "px";

	warning.id = "__ie_warning__";
	body.appendChild(warning);
}

function hideWarning() {
	var warning = document.getElementById('__ie_warning__');
	warning.style.display = 'none';
}

window.onload = function() {
	showWarning();
};
